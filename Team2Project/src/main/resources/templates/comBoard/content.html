<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<link rel="icon" href="/image/icon/logo_icon.png"/> 
<title>Work Wave 공고 상세보기</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css"/>
<link rel="stylesheet" th:href="@{/css/include.css}">
<link rel="stylesheet" th:href="@{/css/comBoard.css}">

<script src="https://cdn.ckeditor.com/ckeditor5/41.4.2/classic/ckeditor.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>

<script th:src="@{/js/comBoard/content.js}"></script>
</head>
<body>
	<div th:replace="~{include/header}"></div>
		<div layout:fragment="content" class="content">
			<input sec:authorize="isAuthenticated() and hasRole('USER')" type="hidden" id="sessionID" th:value="${session.uDTO.user_id}">
			<input sec:authorize="isAuthenticated() and hasRole('COMPANY')" type="hidden" id="sessionID" th:value=1>
			<div class="comBoardContentTotalDiv">
				<h3 class="comBoardInputTitle topTitle">채용정보</h3>
				<div class="comBoardContentDiv">
					<div class="top_l_cominfo_div">
						<div class="top_cominfo_div">
							<p class="comName">
								<span th:text="${map.dto.company_name}"></span>
								<input type="checkbox" id="interest_check" class="interest_check" th:value="${map.dto.company_name}">
								<label for="interest_check"></label>
							</p>
							<p class="comBTitle" th:text="${map.dto.com_board_title}"></p>
						</div>
						<div class="l_cominfo_div cominfo_div">
							<h5>지원자격</h5>
							<dl class="infoDl">
								<dt>경력</dt>
								<dd th:text="${map.dto.com_board_career}"></dd>
								<dt>학력</dt>
								<dd th:text="${map.dto.com_board_edu}"></dd>
							</dl>
						</div>
						<div class="r_cominfo_div cominfo_div">
							<h5>근무조건</h5>
							<dl class="infoDl">
								<dt>고용형태</dt>
								<dd th:text="${map.dto.com_board_jobtype}"></dd>
								<dt>급여</dt>
								<dd th:text="${map.dto.com_board_sal}"></dd>
								<dt>지역</dt>
								<dd th:text="${map.dto.company_addr}"></dd>
								<dt>시간</dt>
								<dd th:text="${map.dto.com_board_week+map.dto.com_board_time}"></dd>
							</dl>
						</div>
					</div>
					
					<div class="top_r_cominfo_div">
						<img th:if="${map.dto.company_logo != null}" th:src="@{'\\image\\logo\\'+${map.dto.company_logo}}" alt="${map.dto.company_logo_name}">
						<img th:if="${map.dto.company_logo == null}" src="/image/icon/logo_icon.png" alt="로고미등록">
						<dl class="infoDl">
							<dt>업종</dt>
							<dd th:text="${map.dto.com_board_step}"></dd>
							<dt>사원 수</dt>
							<dd th:text="${map.dto.company_emp_count}"></dd>
							<dt>설립입</dt>
							<dd th:text="${#dates.format(map.dto.company_regdate, 'yyyy-MM-dd')}"></dd>
							<dt>홈페이지</dt>
							<dd><a th:href="@{${map.dto.company_homepage}}" th:text="${map.dto.company_homepage}"></a></dd>
						</dl>
					</div>
				</div><!-- 채용정보 -->
				
				<h3 class="comBoardInputTitle">상세모집내용</h3>
				<div class="comBoardContentDiv">
					<div th:utext="${map.dto.com_board_cont}"></div>
				</div><!-- 상세 -->
				
				<h3 class="comBoardInputTitle">접수기간</h3>
				<div class="comBoardContentDiv">
					<dl class="infoDl">
						<dt>시작일</dt>
						<dd th:text="${#dates.format(map.dto.com_board_start_date, 'yyyy-MM-dd')}"></dd>
						<dt>마감일</dt>
						<dd th:text="${#dates.format(map.dto.com_board_end_date, 'yyyy-MM-dd')}"></dd>
					</dl>
				</div><!-- 접수기간 -->
				
				<div sec:authorize="isAuthenticated() and hasRole('USER')" class="comBoardContentDiv">
					<h3 class="comBoardInputTitle">지원자 현황 통계</h3>
					<div>
						<div>
							<h5>지원자 수</h5>
							<p th:text="${map.applyTotal}"></p>
						</div>
						<div>
							<h5>모집인원</h5>
							<p th:text="${map.dto.com_board_mojib}"></p>
						</div>
						<div>
							<h5>연령</h5>
							<div th:if="${!map.avgAge.isEmpty()}">
								<table>
									<tr th:each="avgAge:${map.avgAge}">
										<th>
											<div>
												<div></div>
											</div>
										</th>
									</tr>
								</table>
							</div>
						</div>
						<div>
							<h5>성별</h5>
							<div th:if="${!map.avgGender.isEmpty()}">
								<dl class="infoDl" th:each="avgGender:${map.avgGender}">
									<dt th:if="${avgGender.GENDER=='M'}">남자</dt>
									<dt th:if="${avgGender.GENDER=='F'}">여자</dt>
									<dd th:text="${avgGender.COUNT+'명'}"></dd>
								</dl>
							</div>
						</div>
						<div>
							<h5>학력</h5>
							<div th:if="${!map.avgEdu.isEmpty()}">
								<dl class="infoDl" th:each="avgEdu:${map.avgGender}">
									<dt th:text="${avgEdu.Edu}"></dt>
									<dd th:text="${avgEdu.COUNT+'명'}"></dd>
								</dl>
							</div>
						</div>
					</div>
				</div><!-- 지원자 통계 -->
				
				<h3 class="comBoardInputTitle">기업정보</h3>
				<div class="comBoardContentDiv">
					<img th:if="${map.dto.company_logo != null}" th:src="@{'\\image\\logo\\'+${map.dto.company_logo}}" alt="${map.dto.company_logo_name}">
					<img th:if="${map.dto.company_logo == null}" src="/image/icon/logo_icon.png" alt="로고미등록">
					<input type="hidden" id="code" th:value="${map.dto.com_board_step}">
					<dl class="infoDl">
						<dt>업종</dt>
						<dd th:text="${map.dto.com_board_step}"></dd>
						<dt>사원 수</dt>
						<dd th:text="${map.dto.company_emp_count}"></dd>
						<dt>설립입</dt>
						<dd th:text="${map.dto.company_regdate}"></dd>
						<dt>매출액</dt>
						<dd th:text="${map.dto.company_sal}"></dd>
						<dt>복리후생</dt>
						<dd th:text="${map.dto.com_board_benefits}"></dd>
					</dl>
				</div><!-- 기업정보 -->
			
				<div sec:authorize="isAuthenticated() and hasRole('COMPANY')" th:if="${session.cDTO.company_key == map.dto.company_key}">
					<h3 class="comBoardInputTitle">추전인재</h3>
					<div class="comBoardContentDiv">
						<div>
							<table id="recommendList" class="recommendListTb"></table>
						</div>
						<div>
							<!-- Page navigation -->
				            <ul class="pagination" id="pagination"></ul>
						</div> <!-- 페이징 -->
					</div><!-- 포지션제안 -->
				
					 <!-- Modal HTML embedded directly into document -->
				    <div id="recommendModal" class="modal">
				    	<form id="positionForm" >
							<input type="hidden" name="user_name" id="user_name">
							<input type="hidden" name="user_key" id="user_key">
							<input type="hidden" name="com_board_key" id="com_board_key" th:value="${map.dto.com_board_key}">
							<table>
								<tr>
									<td><input name="position_title" id="position_title" class="textW100" placeholder="포지션 제안 제목을 입력하세요"></td>
								</tr>
								<tr>
									<td><textarea name="position_cont" id="position_cont" placeholder="포지션 제안 내용을 입력하세요"></textarea></td>
								</tr>
							</table>
							<div class="comBoardBtDiv_fix">
								<input type="button" value="포지션제안" class="btCss1 btCss" onclick="goPositionInputModal()">
							</div>
				    	</form>
				    </div>
			    </div>
			    
				<div class="comBoardBtDiv_fix" style="margin-bottom: 60px;">
					<input type="button" class="btCss1 btCss" th:onclick="|location.href='@{/A/comBoard(P=${map.P})}'|" value="목록">
				</div>
			</div>
		</div>

	<div th:replace="~{include/footer :: footer}"></div>
</body>
</html>